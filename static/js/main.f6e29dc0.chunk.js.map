{"version":3,"sources":["img.js","submit.js","App.js","serviceWorker.js","index.js"],"names":["cdn","Logo","v2ray","trojan","ss","apiBaseURL","TextArea","Input","Option","Select","Content","Layout","Footer","confirm","Modal","InputGroup","Group","supportedType","validPrefix","base64regex","inputTabList","key","tab","operateTabList","ssMethod","defaultJson","num","id","aid","add","port","ps","replace","vmess","net","host","path","tls","type","v","Base64","s","btoa","unescape","encodeURIComponent","decodeURIComponent","escape","atob","urlType","text","test","slice","search","textTool","text2json","vmess_json","JSON","parse","json","raw","shortid","generate","remarkStartIndex","ss_name","ss_link","split","ss_info","ss_json","argStartIndex","trojan_name","trojan_link","trojan_peer","trojan_json","unsupported","isText","every","x","json2text","stringify","text2qrcode","size","value","urlArray","cipher","length","map","arr","join","submitCustomForm","user","pwd","base64text","a","axios","method","baseURL","url","data","crypto","createHash","update","digest","then","objId","_id","console","error","App","useState","inputActive","setInputActive","operateActive","setOperateActive","base64Input","setBase64Input","textInput","setTextInput","subscribeInput","setSubscribeInput","serverList","setServerList","serverPointer","setServerPointer","useClippy","clipboard","isLoading","setLoading","hasEdited","setHasEdited","createdNo","setCreatedNo","qrcodeVisible","setQrcodeVisible","subLinkVisible","setSubLinkVisible","customLink","setCustomLink","customFormVisible","setCustomFormVisble","customFormLoading","setCustomFormLoading","customLinkUser","setCustomLinkUser","customLinkPwd","setCustomLinkPwd","useEffect","window","location","searchParams","URLSearchParams","get","inputOnChange","subscribe","target","catch","err","getServerList","text_b64","urls","filter","includes","log","getSubscription","subs","subArr","resultArr","sub","res","push","base64","e","params","set","history","replaceState","pathname","content","message","loading","success","duration","warning","importFromClipboard","selectOnChange","item","val","findIndex","customLinkForm","userOnChange","trim","pwdOnChange","submit","subLinkCreationConfirm","title","icon","ShareAltOutlined","onOk","onCancel","subLinkModal","btnOnClick","InfoOutlined","okText","cancelText","okType","qrcodeModal","delete","close","performDelete","obj","new_pointer","new_base64","new_urls","getLogo","logo","src","alt","className","hasOwnProperty","QuestionCircleTwoTone","editOnChange","selectedId","new_net","address","uuid","checked","ws","create","typeKey","new_createdNo","new_createdNoJson","new_json","new_raw","new_server","new_text","inputTabContent","API","gutter","style","marginBottom","span","rows","autosize","placeholder","onChange","block","onClick","TEXT","BASE64","_buttons","count","offset","dot","disabled","commonContent","select","display","justifyContent","showSearch","width","filterOption","input","option","children","toLowerCase","indexOf","overlay","Item","toUpperCase","PlusOutlined","DeleteOutlined","ExclamationCircleOutlined","danger","remark","addonAfter","onPressEnter","serverAddress","compact","textAlign","skeleton","detailedContent","xs","sm","md","marginLeft","checkedChildren","unCheckedChildren","Password","operateTabContent","fastEdit","justify","detailedEdit","marginRight","QrcodeOutlined","CheckOutlined","Base64Output","TextOutput","align","index","tabList","tabBarExtraContent","activeTabKey","onTabChange","visible","confirmLoading","href","data-ribbon","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f6e29dc0.chunk.js","sourcesContent":["const cdn = 'https://res.cloudinary.com/phlincloud/image/upload/v1583267224/b64-url-editor';\r\n\r\nexport const Logo = {\r\n    v2ray: cdn + '/v2ray_logo_ygiuj5.png',\r\n    trojan: cdn + '/trojan-gfw_logo_z3oa6y.png',\r\n    ss: cdn + '/ss_logo_nzt66p.png'\r\n}","export const apiBaseURL = \"https://api.phlin.cc/b64\";","import React, { useState, useEffect } from 'react';\r\nimport { Button, Input, Menu, Radio, Select, Switch, Dropdown } from 'antd';\r\nimport { Layout, Row, Col, Card } from 'antd';\r\nimport { Badge, Modal, message, Skeleton } from 'antd';\r\nimport { CheckOutlined, DeleteOutlined, InfoOutlined, PlusOutlined, QrcodeOutlined } from '@ant-design/icons';\r\nimport { ExclamationCircleOutlined, QuestionCircleTwoTone, ShareAltOutlined } from '@ant-design/icons';\r\nimport shortid from 'shortid';\r\nimport useClippy from 'use-clippy';\r\nimport axios from 'axios';\r\nimport crypto from 'crypto';\r\nimport QRCode from 'qrcode.react';\r\nimport './App.css';\r\nimport { Logo } from './img';\r\nimport { apiBaseURL } from './submit';\r\nimport 'github-fork-ribbon-css/gh-fork-ribbon.css';\r\n\r\nconst { TextArea } = Input;\r\nconst { Option } = Select;\r\nconst { Content, Footer } = Layout;\r\nconst { confirm } = Modal;\r\nconst InputGroup = Input.Group;\r\n\r\nconst supportedType = ['ss','vmess','trojan'];\r\nconst validPrefix = /^(vmess|ss|trojan).*/;\r\n\r\nconst base64regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\r\n\r\nconst inputTabList = [{key: 'API', tab: 'API'}, {key: 'TEXT', tab: 'URL'}, {key: 'BASE64', tab: 'BASE64'} ];\r\n\r\nconst operateTabList = [{key: 'fastEdit', tab: '快速操作'}, {key: 'detailedEdit', tab: '详细编辑'}];\r\n\r\nconst ssMethod = ['none','table','rc4','rc4-md5','rc4-md5-6','salsa20','chacha20','chacha20-ietf',\r\n'aes-256-cfb','aes-192-cfb','aes-128-cfb','aes-256-cfb1','aes-192-cfb1','aes-128-cfb1','aes-256-cfb8','aes-192-cfb8','aes-128-cfb8',\r\n'aes-256-ctr','aes-192-ctr','aes-128-ctr','bf-cfb','camellia-256-cfb','camellia-192-cfb','camellia-128-cfb',\r\n'cast5-cfb','des-cfb','idea-cfb','seed-cfb','aes-256-gcm','aes-192-gcm','aes-128-gcm',\r\n'chacha20-ietf-poly1305','chacha20-poly1305','xchacha20-ietf-poly1305'];\r\n\r\nconst defaultJson = {\r\n  ss: (num) => ({ id: \"加密方式 (Method)\", aid: \"\", add: \"\", port: \"\", ps: \"new shadowsocks [%]\".replace('%',num) }),\r\n  vmess: (num) => ({ add: \"\", port:\"\", id:\"\", aid: 0, net: \"\", host: \"\", path:\"/\", tls: \"none\", type: \"none\", ps: \"new v2ray [%]\".replace('%',num), v: 2 }),\r\n  trojan: (num) => ({ aid: \"\", add: \"\", port: \"\", ps: \"new trojan [%]\".replace('%',num) })\r\n}\r\n\r\n// convert utf-8 encoded base64\r\nconst Base64 = {\r\n  encode: (s) => {\r\n    return btoa(unescape(encodeURIComponent(s)));\r\n  },\r\n  decode: (s) => {\r\n    return decodeURIComponent(escape(atob(s)));\r\n  }\r\n};\r\n\r\nconst urlType = (text) => {\r\n  return validPrefix.test(text)? text.slice(0,text.search('://')):'unsupported';\r\n}\r\n\r\nconst textTool = {\r\n  text2json: ({\r\n    vmess: ( (text) => {\r\n      const vmess_json = JSON.parse(Base64.decode(text.replace('vmess://','')));\r\n      return { type: urlType(text), json: vmess_json, raw: text, id: shortid.generate() };\r\n    }),\r\n    ss: ( (text) => {\r\n      const remarkStartIndex = text.search('#');\r\n      const ss_name = decodeURIComponent(text.slice(remarkStartIndex+1));\r\n      const ss_link = text.slice(5,remarkStartIndex).split(/[@:]+/); // userinfo@mydomain.com:8888\r\n      const ss_info = Base64.decode(ss_link[0]).split(':'); // userinfo = websafe-base64-encode-utf8(method  \":\" password)\r\n      const ss_json = { id: ss_info[0], aid: ss_info[1], add: ss_link[1], port: ss_link[2], ps: ss_name };\r\n      return { type: urlType(text), json: ss_json, raw: text, id: shortid.generate()}; //id: security method, aid: password\r\n    }),\r\n    trojan: ( (text) =>{\r\n      const argStartIndex = text.search('\\\\?');\r\n      const remarkStartIndex = text.search('#');\r\n      const trojan_name = decodeURIComponent(text.slice(remarkStartIndex+1)); // trojan://[password]@[address]:[port]?peer=[host]#[remark]\r\n      const trojan_link = text.slice(9,argStartIndex).split(/[@:]+/);\r\n      const trojan_peer = text.slice(argStartIndex+1,remarkStartIndex).replace('peer=','');\r\n      const trojan_json = { aid: trojan_link[0], add: trojan_link[1], port: trojan_link[2], host: trojan_peer, ps: trojan_name };\r\n      return {type: urlType(text), json: trojan_json, raw: text, id: shortid.generate()};\r\n    }),\r\n    unsupported: ( (text) => {\r\n      return { type: urlType(text), json:{}, raw: text, id: shortid.generate() };\r\n    }),\r\n    isText: ( (text) => ( text.split(/[,;\\n]+/).every( x => validPrefix.test(x) ) ))\r\n  }),\r\n  json2text: ({\r\n    vmess: ( (json) => ( 'vmess://' + Base64.encode(JSON.stringify(json)) ) ),\r\n    ss: ( (json) => {\r\n      // chacha20-ietf:password@mydomain.com:8888\r\n      // id: method, aid: password\r\n      // sip002:\r\n      // SS-URI = \"ss://\" userinfo \"@\" hostname \":\" port [ \"/\" ] [ \"?\" plugin ] [ \"#\" tag ]\r\n      // userinfo = websafe-base64-encode-utf8(method  \":\" password)\r\n      const ss_info = json.id + ':' + json.aid;\r\n      return 'ss://' + Base64.encode(ss_info) + '@' + json.add + ':' + json.port + '#' + encodeURIComponent(json.ps);\r\n    }),\r\n    trojan: ( (json) => {\r\n      // trojan://[password]@[address]:[port]?peer=#[remark]\r\n      return 'trojan://' + json.aid + '@' + json.add + ':' + json.port + '?peer='+ (json.host? json.host:json.add) + '#' + encodeURIComponent(json.ps);\r\n    }),\r\n    unsupported: ( (json) => json.raw )\r\n  }),\r\n  text2qrcode: ( (text) => <QRCode size=\"96\" value={text}></QRCode>)\r\n}\r\n\r\nconst urlArray = {\r\n  b64ToArr: ((cipher) => {\r\n    if(cipher.length && base64regex.test(cipher)){\r\n      const text_list = Base64.decode(cipher).split(/[,;\\n]+/); //base64 cipher to text to array of texts\r\n      const json_arr = text_list.map(x => textTool.text2json[urlType(x)](x)); // array of texts to array of jsons\r\n      //console.log('urlArray.b64ToArr',json_arr);\r\n      return json_arr; //array of jsons\r\n    }else {\r\n      return cipher; //if input is not a base64 cipher, return the original input\r\n    }\r\n  }),\r\n  arrToB64: ((arr) => ( Base64.encode( arr.map( x=> textTool.json2text[x.type](x.json) ).join('\\n') ) ))\r\n}\r\n\r\nconst submitCustomForm = async (user, pwd, base64text) => {\r\n  try {\r\n    // check if user and password matched\r\n    const objId = await axios({\r\n      method: 'post',\r\n      baseURL: apiBaseURL,\r\n      url: '/check',\r\n      'Content-Type': 'application/json',\r\n      data: {\"user\": user , \"pwd\": crypto.createHash('sha256').update(pwd).digest('base64')}\r\n    }).then(x => x.data);\r\n    if(objId.length){\r\n      // if matched, update records\r\n      return axios({\r\n        method: 'put',\r\n        baseURL: apiBaseURL,\r\n        url: objId[0]._id,\r\n        data: {\"encrypted\": base64text}\r\n      })\r\n    }else {\r\n      // if not matched, create  a new record\r\n      return axios({\r\n        method: 'post',\r\n        baseURL: apiBaseURL,\r\n        'Content-Type': 'application/json',\r\n        data: {\"user\": user, \"pwd\": crypto.createHash('sha256').update(pwd).digest('base64')\r\n        , \"encrypted\": base64text}\r\n      })\r\n    }\r\n  }catch(err) {\r\n    console.error(err);\r\n  }\r\n\r\n}\r\n\r\nfunction App() {\r\n  const [ inputActive, setInputActive ] = useState('API');\r\n  const [ operateActive, setOperateActive ] = useState('fastEdit');\r\n\r\n  const [ base64Input, setBase64Input ] = useState('');\r\n  const [ textInput, setTextInput ] = useState('');\r\n  const [ subscribeInput, setSubscribeInput ] = useState('');\r\n\r\n  const [ serverList, setServerList ] = useState([]);\r\n  const [ serverPointer, setServerPointer ] = useState(0); // index of selected item\r\n\r\n  const [ clipboard, setClipboard ] = useClippy();\r\n\r\n  const [ isLoading, setLoading ] = useState(true);\r\n  const [ hasEdited, setHasEdited ] = useState(0);\r\n\r\n  const [ createdNo, setCreatedNo ] = useState({ss: 0, vmess: 0, trojan: 0});\r\n\r\n  const [ qrcodeVisible, setQrcodeVisible ] = useState(false);\r\n\r\n  const [ subLinkVisible, setSubLinkVisible ] = useState(false);\r\n  const [ customLink, setCustomLink ] = useState('');\r\n  const [ customFormVisible, setCustomFormVisble ] = useState(false);\r\n  const [ customFormLoading, setCustomFormLoading ] = useState(false);\r\n\r\n  const [ customLinkUser, setCustomLinkUser ] = useState('');\r\n  const [ customLinkPwd, setCustomLinkPwd ] = useState('');\r\n\r\n  useEffect ( () => {\r\n    if(window.location.search){\r\n      const searchParams = new URLSearchParams(window.location.search);\r\n      if(searchParams.get('sub') !== null){\r\n        inputOnChange.subscribe({target:{value: searchParams.get('sub') }})\r\n        .then( x => {if(x && searchParams.get('qrcode') === 'yes') setQrcodeVisible(true);} )\r\n        .catch( err => console.error(err) );\r\n      }\r\n    }\r\n  },[]); // this empty array is a trick to make useEffect to run only once when the page mounted\r\n\r\n  const getServerList = (text_b64) => {\r\n    try{\r\n      if(base64regex.test(text_b64)) {\r\n        //function urlArray.b64ToArr will turn base64 format urls and create a serverList array\r\n        //urlArray.b64ToArr(text_b64) is an array from original base64\r\n        //urls is an array urlArray.b64ToArr(text_b64) skipping empty liines\r\n        const urls = urlArray.b64ToArr(text_b64).filter(x => x.raw !== \"\");\r\n        if (urls.length <  urlArray.b64ToArr(text_b64).length){\r\n          setBase64Input(urlArray.arrToB64(urls)); // update base64 input field if any empty line was skipped\r\n          setTextInput(Base64.decode(urlArray.arrToB64(urls)));\r\n        }\r\n        if (urls.filter(x => supportedType.includes(x.type)).length > 0){\r\n          setServerList(urls);\r\n          //console.log('getServerList',urls);\r\n          setLoading(false);\r\n          return urls;\r\n        }else {\r\n          return text_b64;\r\n        }\r\n      }\r\n    }catch(err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  const getSubscription = async (subs) => {\r\n    let subArr = subs.split(/[,;\\n]+/);\r\n    let resultArr = [];\r\n    for(let sub of subArr){\r\n      await axios.get(sub)\r\n      .then(res => {\r\n        resultArr.push(Base64.decode(res.data));\r\n      }).catch(console.error);\r\n    }\r\n    return resultArr.join('\\n');\r\n  }\r\n\r\n  const inputOnChange = {\r\n    base64: (e) => {\r\n      setBase64Input(e.target.value);\r\n      if(base64regex.test(e.target.value)) {\r\n        try{\r\n          setTextInput(Base64.decode(e.target.value));\r\n          getServerList(e.target.value);\r\n        }catch(err){\r\n          console.error(err);\r\n        }\r\n      }\r\n    },\r\n    text: (e) => {\r\n      setTextInput(e.target.value);\r\n      if(e.target.value === '') { return; }\r\n      const text_b64 = Base64.encode(e.target.value);\r\n      setBase64Input(text_b64);\r\n      if(base64regex.test(text_b64)) {\r\n        try{\r\n          getServerList(text_b64);\r\n          const params = new URLSearchParams(window.location.search);\r\n          params.set('sub',Base64.decode(text_b64));\r\n          window.history.replaceState({}, '', `${window.location.pathname}?${params}`);\r\n        }catch(err){\r\n          console.error(err);\r\n        }\r\n      }\r\n      // if equals, mean that input text have not been transferred to urls array\r\n      //console.log(text_b64);\r\n    },\r\n    subscribe: async (e) => {\r\n      const content = e.target.value;\r\n      if(content === null) { return; }\r\n\r\n      setSubscribeInput(content);\r\n      if(textTool.text2json.isText(content)) {\r\n        setTextInput(content);\r\n        if(e.target.value === '') { return; }\r\n        const text_b64 = Base64.encode(content);\r\n        setBase64Input(text_b64);\r\n        if(base64regex.test(text_b64)) {\r\n          try{\r\n            setTextInput(Base64.decode(text_b64));\r\n            getServerList(text_b64);\r\n            setInputActive('TEXT');\r\n          }catch(err){\r\n            console.error(err);\r\n          }\r\n        }\r\n        // if equals, mean that input text have not been transferred to urls array\r\n        console.log(text_b64);\r\n      }else if(/^(http|https).*/.test(content)){\r\n        const key = 'fetching';\r\n        const params = new URLSearchParams(window.location.search);\r\n        params.set('sub',content);\r\n        window.history.replaceState({}, '', `${window.location.pathname}?${params}`);\r\n        message.loading({ content: '导入订阅链接中', key });\r\n        return await getSubscription(content)\r\n        .then(x => {setTextInput(x); return Base64.encode(x);})\r\n        .then(x => {setBase64Input(x); return getServerList(x);})\r\n        .then(x => {message.success({ content: ['导入',x.length,'个节点','成功'].join(' '), key, duration: 2 });})\r\n        .catch(err => {console.error(err); message.warning({ content: '导入失败', key, duration: 2 }); });\r\n      }\r\n    }\r\n  }\r\n\r\n  const importFromClipboard = {\r\n    base64: ( () => inputOnChange.base64({target:{value: clipboard}}) ) ,\r\n    text: ( () => inputOnChange.text({target:{value: clipboard}}) ),\r\n    subscribe: ( () => inputOnChange.subscribe({target:{value: clipboard}}) )\r\n  }\r\n\r\n  const selectOnChange = {\r\n    item: ( (val) => {\r\n      //console.log(e);\r\n      setServerPointer(serverList.findIndex(x => x.id === val[1]));\r\n    })\r\n  }\r\n\r\n\r\n  const performSave = () => {\r\n    const Base64Output = urlArray.arrToB64(serverList);\r\n    const TextOutput = serverList.map(x => textTool.json2text[x.type](x.json) ).join('\\n');\r\n    setBase64Input(Base64Output);\r\n    setTextInput(TextOutput);\r\n    message.success('保存成功');\r\n    console.log(serverList);\r\n    setHasEdited(0);\r\n  }\r\n\r\n  const customLinkForm = {\r\n    userOnChange: ( e => setCustomLinkUser(e.target.value.trim()) ),\r\n    pwdOnChange: ( e => setCustomLinkPwd(e.target.value)),\r\n    submit: ( async () => {\r\n      try{\r\n        const params = new URLSearchParams(window.location.search);\r\n        setCustomFormLoading(true);\r\n        submitCustomForm(customLinkUser, customLinkPwd, base64Input)\r\n        .then( x => { return x.data._id } )\r\n        .then( x => { return apiBaseURL+'/'+x })\r\n        .then( x => {\r\n          setCustomLink(x);\r\n          params.set('sub',x);\r\n          window.history.replaceState({}, '', `${window.location.pathname}?${params}`) })\r\n        .then( () => {\r\n          message.success('订阅链接己生成');\r\n          setCustomFormLoading(false);\r\n          setSubLinkVisible(true);\r\n          setCustomFormVisble(false); })\r\n        .catch( (err) => {\r\n          console.error(err);\r\n          setCustomFormLoading(false);\r\n        } )\r\n      }catch(err) {\r\n        console.error(err);\r\n        setCustomFormLoading(false);\r\n        message.error('Internal Error');\r\n      }\r\n    })\r\n  }\r\n\r\n  const subLinkCreationConfirm = () => {\r\n    confirm({title: '确定生成订阅链接？',\r\n    icon: <ShareAltOutlined />,\r\n    content: 'This operation will use an API provided by the author, and your data will be confidential. Your links will not be sent by API before confirming . If you have security concern please make your own decision before clicking OK.',\r\n    onOk() {\r\n      setCustomFormVisble(true);\r\n      return;\r\n    },\r\n    onCancel(){\r\n      return;\r\n    }})\r\n  }\r\n\r\n  const subLinkModal = {\r\n    btnOnClick: (() => {\r\n      if(hasEdited){\r\n        confirm({\r\n          title: '有未保存的修改' ,\r\n          icon: <InfoOutlined />,\r\n          content: '按保存生成订阅链接',\r\n          okText: '保存',\r\n          cancelText: '取消',\r\n          okType: 'danger',\r\n          onOk: () =>  {\r\n            setBase64Input( urlArray.arrToB64(serverList) );\r\n            setTextInput( serverList.map(x => textTool.json2text[x.type](x.json) ).join('\\n') );\r\n            setHasEdited(0);\r\n            message.success('保存成功');\r\n            subLinkCreationConfirm();},\r\n          onCancel: () => { return; }}\r\n        );\r\n      }else {\r\n        subLinkCreationConfirm();\r\n      }\r\n      return;\r\n    }),\r\n  }\r\n\r\n  const qrcodeModal = {\r\n    btnOnClick: ( () => {\r\n      const params = new URLSearchParams(window.location.search);\r\n      if(hasEdited){\r\n        confirm({\r\n          title: '有未保存的修改' ,\r\n          icon: <InfoOutlined />,\r\n          content: '按保存生成二维码',\r\n          okText: '保存',\r\n          cancelText: '取消',\r\n          okType: 'danger',\r\n          onOk() {\r\n            setBase64Input( (urlArray.arrToB64(serverList)) );\r\n            setTextInput(serverList.map(x => textTool.json2text[x.type](x.json) ).join('\\n') );\r\n            message.success('二维码己生成');\r\n            setHasEdited(0);\r\n            setQrcodeVisible(true);\r\n\r\n            params.set('qrcode','yes');\r\n            window.history.replaceState({}, '', `${window.location.pathname}?${params}`);\r\n          },\r\n          onCancel() {\r\n            setQrcodeVisible(false);\r\n            params.delete('qrcode');\r\n            window.history.replaceState({}, '', `${window.location.pathname}?${params}`);\r\n          },});\r\n        }else{\r\n        setQrcodeVisible(true);\r\n        params.set('qrcode','yes');\r\n        window.history.replaceState({}, '', `${window.location.pathname}?${params}`);\r\n      }\r\n      return;\r\n    }),\r\n    close: ( () => {\r\n      setQrcodeVisible(false);\r\n      const params = new URLSearchParams(window.location.search);\r\n      params.delete('qrcode');\r\n      window.history.replaceState({}, '', `${window.location.pathname}?${params}`);\r\n    } ),\r\n  }\r\n\r\n  //const redoOnClick = () => {\r\n    //const orignalName = urlName(serverList[serverPointer].raw);\r\n    //const selectedId = serverList[serverPointer].id;\r\n    //setServerList(serverList.map(item => item.id === selectedId ? {...item, name: orignalName }: item));\r\n  //}\r\n\r\n  const deleteOnClick = () => {\r\n    confirm({\r\n      title: '确定要删除' + serverList[serverPointer].json.ps + '?' ,\r\n      icon: <ExclamationCircleOutlined />,\r\n      content: '这项操作无法复原',\r\n      okText: '确定',\r\n      cancelText: '取消',\r\n      okType: 'danger',\r\n      onOk() {\r\n        //console.log(serverPointer);\r\n        performDelete(serverList[serverPointer]);\r\n        //console.log('OK');\r\n      },\r\n      onCancel() {\r\n        //console.log('Cancel');\r\n        console.log(serverList);\r\n      },\r\n    });\r\n  }\r\n\r\n  const performDelete = (obj) => {\r\n    let new_pointer = 0;\r\n    // move pointer first\r\n    if(serverList.filter(item => item.id !== obj.id).length){\r\n      new_pointer = (serverPointer+1)%serverList.filter(item => item.id !== obj.id).length;\r\n    }\r\n    setServerPointer(new_pointer);\r\n    //delete\r\n    try{\r\n      const new_base64 = urlArray.arrToB64(serverList.filter(item => item.id !== obj.id));\r\n      const new_urls = urlArray.b64ToArr(new_base64);\r\n      setBase64Input(new_base64);\r\n      setTextInput(Base64.decode(new_base64));\r\n      setServerList(new_urls);\r\n      message.success('删除 ' + obj.json.ps + ' 成功');\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n    \r\n  }\r\n\r\n  const getLogo = (type) => {\r\n    const logo = {\r\n      vmess: (<img src={Logo.v2ray} alt=\"v2Ray\" className=\"logo-wrap\" />),\r\n      trojan: (<img src={Logo.trojan} alt=\"trojan-gfw\" className=\"logo-wrap\" />),\r\n      ss: (<img src={Logo.ss} alt=\"Shadowsocks\" className=\"logo-wrap\" />)\r\n    };\r\n    //console.log(logo[type]);\r\n    return logo.hasOwnProperty(type)? logo[type]:(<QuestionCircleTwoTone />)\r\n  }\r\n\r\n  const editOnChange = {\r\n    ps: ( (e) => {\r\n      const selectedId = serverList[serverPointer].id;\r\n      // Mapping the old array into a new one, swapping what you want to change for an updated item along the way.\r\n      setServerList(serverList.map(item => item.id === selectedId ? {...item, json: {...item.json, ps: e.target.value } }: item));\r\n      setHasEdited(1);\r\n    }),\r\n    net: ( (e) => {\r\n      const new_net = e.target.value;\r\n      if(serverList[serverPointer].json){\r\n        const selectedId = serverList[serverPointer].id;\r\n        if(new_net === 'kcp'){\r\n          setServerList(serverList.map(item => item.id === selectedId ? {...item, json: {...item.json, net: new_net, host: \"\", path: \"\", type: textTool.text2json.vmess(serverList[serverPointer].raw).json.type} }: item));\r\n          setHasEdited(1);\r\n        }else if(new_net === 'ws'){\r\n          setServerList(serverList.map(item => item.id === selectedId ? {...item, json: {...item.json, net: new_net, host: textTool.text2json.vmess(serverList[serverPointer].raw).json.host, path: textTool.text2json.vmess(serverList[serverPointer].raw).json.path} }: item));\r\n          setHasEdited(1);\r\n        }else{\r\n          setServerList(serverList.map(item => item.id === selectedId ? {...item, json: {...item.json, net: new_net, host: \"\", path: \"\"} }: item));\r\n          setHasEdited(1);\r\n        }\r\n      }\r\n    }),\r\n    address : ((e) => {\r\n      const selectedId = serverList[serverPointer].id;\r\n      if(serverList[serverPointer].type === 'vmess' && !serverList[serverPointer].json.net) {\r\n        setServerList(serverList.map(item => item.id === selectedId ? {...item, json: {...item.json, add: e.target.value, host: e.target.value} }: item));\r\n      }else{\r\n        setServerList(serverList.map(item => item.id === selectedId ? {...item, json: {...item.json, add: e.target.value} }: item));\r\n      }\r\n      setHasEdited(1);\r\n    }),\r\n    port: ((e) => {\r\n      const selectedId = serverList[serverPointer].id;\r\n      setServerList(serverList.map(item => item.id === selectedId ? {...item, json: {...item.json, port: e.target.value} }: item));\r\n      setHasEdited(1);\r\n    }),\r\n    uuid: ((e) => {\r\n      const selectedId = serverList[serverPointer].id;\r\n      setServerList(serverList.map(item => item.id === selectedId ? {...item, json: {...item.json, id: e.target.value} }: item));\r\n      setHasEdited(1);\r\n    }),\r\n    aid: ((e) => {\r\n      const selectedId = serverList[serverPointer].id;\r\n      setServerList(serverList.map(item => item.id === selectedId ? {...item, json: {...item.json, aid: e.target.value} }: item));\r\n      setHasEdited(1);\r\n    }),\r\n    tls: ((checked, e) => {\r\n      //console.log(e);\r\n      const selectedId = serverList[serverPointer].id;\r\n      setServerList(serverList.map(item => item.id === selectedId ? {...item, json: {...item.json, tls: checked? 'tls':'none' } }: item));\r\n      setHasEdited(1);\r\n    }),\r\n    ws: {\r\n      host: ((e) => {\r\n        const selectedId = serverList[serverPointer].id;\r\n        if(serverList[serverPointer].json.net === 'ws' || serverList[serverPointer].type === 'trojan'){\r\n          setServerList(serverList.map(item => item.id === selectedId ? {...item, json: {...item.json, host: e.target.value} }: item));\r\n          setHasEdited(1);\r\n        }else {\r\n          return;\r\n        }\r\n      }),\r\n      path: ((e) => {\r\n        const selectedId = serverList[serverPointer].id;\r\n        if(serverList[serverPointer].json.net === 'ws'){\r\n          setServerList(serverList.map(item => item.id === selectedId ? {...item, json: {...item.json, path: e.target.value} }: item));\r\n          setHasEdited(1);\r\n        }else{\r\n          return;\r\n        }\r\n      })\r\n    },\r\n    type: ((val) => {\r\n      const selectedId = serverList[serverPointer].id;\r\n      if(serverList[serverPointer].json.net === 'kcp'){\r\n        setServerList(serverList.map(item => item.id === selectedId ? {...item, json: {...item.json, type: val} }: item));\r\n        setHasEdited(1);\r\n      }\r\n    }),\r\n    ssMethod: ( (val) => {\r\n      const selectedId = serverList[serverPointer].id;\r\n      if(serverList[serverPointer].type === 'ss'){\r\n        setServerList(serverList.map(item => item.id === selectedId ? {...item, json: {...item.json, id: val} }: item));\r\n        setHasEdited(1);\r\n      }\r\n    }),\r\n    create: ( (e) => {\r\n      //console.log(e,e.key);\r\n      const typeKey = e.key;\r\n      const new_createdNo = createdNo[typeKey] + 1;\r\n      const new_createdNoJson = JSON.parse(JSON.stringify(createdNo));\r\n      new_createdNoJson[typeKey] = new_createdNo;\r\n      setCreatedNo(new_createdNoJson);\r\n\r\n      const new_json = defaultJson[typeKey](new_createdNo);\r\n      const new_raw = textTool.json2text[typeKey](new_json);\r\n\r\n      const new_server = { type: typeKey, json: new_json, raw: new_raw, id: shortid.generate() };\r\n      setServerList([...serverList, new_server]); //correct way to push new item to array in state\r\n      setServerPointer(serverList.length? serverList.length:0);\r\n      setLoading(false);\r\n      const new_text = (textInput.length? (textInput+';'):'') + new_raw;\r\n      inputOnChange.base64({target:{value: Base64.encode(new_text)}}); // to prevent success message poping up , set base64 instead of text\r\n      setOperateActive('detailedEdit');\r\n      setHasEdited(1);\r\n    })\r\n  }\r\n\r\n  const inputTabContent = {\r\n    API: (<Row gutter={[0,16]} style={{marginBottom: -20}}>\r\n      <Col span={24}><TextArea rows={4} autosize={false} placeholder={'输入订阅网址或服务器链接'} onChange={inputOnChange.subscribe} value={subscribeInput}/></Col>\r\n      <Col span={24} ><Button type=\"primary\" block onClick={importFromClipboard.subscribe}>从剪贴板导入</Button></Col></Row>),\r\n    TEXT: (<Row gutter={[0,16]} style={{marginBottom: -20}}>\r\n      <Col span={24}><TextArea rows={4} autosize={false} onChange={inputOnChange.text} value={textInput}/></Col>\r\n      <Col span={24}><Button type=\"primary\" block onClick={importFromClipboard.text}>从剪贴板导入</Button></Col></Row>),\r\n    BASE64: (<Row gutter={[0,16]} style={{marginBottom: -20}}>\r\n      <Col span={24}><TextArea rows={4} autosize={false} onChange={inputOnChange.base64} value={base64Input}/></Col>\r\n      <Col span={24}><Button type=\"primary\" block onClick={importFromClipboard.base64}>从剪贴板导入</Button></Col></Row>),\r\n    _buttons: (\r\n    <Badge count={hasEdited} offset={[-3,0]} dot>\r\n      <Button type=\"primary\" disabled={!serverList.length || !base64Input.length} onClick={subLinkModal.btnOnClick}>订阅链接</Button>\r\n    </Badge>)\r\n  }\r\n\r\n  const commonContent = {\r\n    select: (<div style={{display: \"flex\", justifyContent: \"space-between\"}}>\r\n    <Select showSearch value={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? [serverList[serverPointer].json.ps,serverList[serverPointer].id]:''} disabled={isLoading || !base64Input.length} style={{width: \"76%\"}} onChange={selectOnChange.item}\r\n    filterOption={ (input,option) => option.children[2].toLowerCase().indexOf(input.toLowerCase()) >= 0  }>\r\n    { serverList.filter(x => supportedType.includes(x.type)).map( (item) => (<Option key={item.id} value={[item.json.ps,item.id]}>{getLogo(item.type)} {item.json.ps}</Option>) ) }\r\n    </Select>\r\n    <Dropdown overlay={<Menu onClick={editOnChange.create}>\r\n      {supportedType.map( x => (<Menu.Item key={x}>{getLogo(x)}&nbsp;&nbsp;{x.toUpperCase()}</Menu.Item>) )}\r\n    </Menu>}><Button type=\"primary\" icon={<PlusOutlined />}/></Dropdown>\r\n    <Button type=\"primary\" disabled={isLoading ||!base64Input.length} icon={<DeleteOutlined />} onClick={deleteOnClick} danger/>\r\n    </div>),\r\n    remark: (<Input placeholder=\"节点名称 (Remark)\" addonAfter={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('type')? ( getLogo(serverList[serverPointer].type) ):(<QuestionCircleTwoTone />)}\r\n    value={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? serverList[serverPointer].json.ps:''} disabled={isLoading || !base64Input.length} onChange={editOnChange.ps} onPressEnter={editOnChange.ps}/>),\r\n    serverAddress: (<InputGroup compact>\r\n    <Input style={{width: \"75%\", textAlign:\"left\"}} disabled={isLoading || !base64Input.length} placeholder=\"服务器地址 (Address)\" onChange={editOnChange.address} value={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? serverList[serverPointer].json.add:''} />\r\n    <Input style={{width: \"25%\"}} disabled={isLoading || !base64Input.length} placeholder=\"port\" onChange={editOnChange.port} value={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? serverList[serverPointer].json.port:''} />\r\n    </InputGroup>),\r\n    skeleton: ( <Row type=\"flex\" style={{marginBottom: -12}}><Skeleton /></Row> ),\r\n  }\r\n\r\n  const detailedContent = {\r\n    vmess: (<Row gutter={[16,24]} type=\"flex\" style={{marginBottom: -18}}>\r\n      <Col xs={24} sm={12} md={12} > {commonContent.select} </Col>\r\n      <Col xs={24} sm={12} md={12}> {commonContent.remark} </Col>\r\n      <Col xs={24} sm={24} md={12}> {commonContent.serverAddress} </Col>\r\n      <Col xs={24} sm={24} md={12}>\r\n        <InputGroup compact>\r\n        <Input style={{width: \"75%\", textAlign:\"left\"}} placeholder=\"UUID\" onChange={editOnChange.uuid} value={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? serverList[serverPointer].json.id:''} />\r\n        <Input style={{width: \"25%\"}} placeholder=\"AID\" onChange={editOnChange.aid} value={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? serverList[serverPointer].json.aid:''} />\r\n        </InputGroup>\r\n      </Col>\r\n      <Col xs={24} sm={24} md={12}>\r\n        <Radio.Group style={{marginLeft: -24}} onChange={editOnChange.net} disabled={isLoading || !base64Input.length} value={serverList[serverPointer]? (serverList[serverPointer].json? serverList[serverPointer].json.net:''):''}>\r\n          <Radio key=\"tcp\" value=\"\">TCP</Radio>\r\n          <Radio key=\"ws\" value=\"ws\">WS</Radio>\r\n          <Radio key=\"kcp\" value=\"kcp\">KCP</Radio>\r\n        </Radio.Group>\r\n        <Switch checkedChildren=\"TLS\" unCheckedChildren=\"TLS\" disabled={isLoading || !base64Input.length} onChange={editOnChange.tls}\r\n        checked={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? (serverList[serverPointer].json.tls === 'tls'):false}></Switch>\r\n      </Col>\r\n      <Col xs={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? (serverList[serverPointer].json.net === 'ws'? 24:0):0}\r\n      sm={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? (serverList[serverPointer].json.net === 'ws'? 24:0):0}\r\n      md={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? (serverList[serverPointer].json.net === 'ws'? 12:0):0}>\r\n      <InputGroup compact>\r\n      <Input style={{width: \"75%\", textAlign:\"left\"}} placeholder=\"域名 (Host)\" onChange={editOnChange.ws.host} value={serverList[serverPointer]? (serverList[serverPointer].hasOwnProperty('json')? serverList[serverPointer].json.host:''):''} />\r\n      <Input style={{width: \"25%\", textAlign:\"left\"}} placeholder=\"path\" onChange={editOnChange.ws.path} value={serverList[serverPointer]? (serverList[serverPointer].hasOwnProperty('json')? serverList[serverPointer].json.path:''):''} />\r\n      </InputGroup>\r\n      </Col>\r\n      <Col xs={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? (serverList[serverPointer].json.net === 'kcp'? 24:0):0}\r\n      sm={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? (serverList[serverPointer].json.net === 'kcp'? 24:0):0}\r\n      md={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? (serverList[serverPointer].json.net === 'kcp'? 12:0):0}>\r\n      <Select style={{width:\"100%\"}} onChange={editOnChange.type} value={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? serverList[serverPointer].json.type:''}>\r\n        <Option key='none' value='none'>none (不伪装)</Option>\r\n        <Option key='wechat-video' value='wechat-video'> \b\bwechat-video (伪装微信视频) </Option>\r\n        <Option key='srtp' value='srtp'>srtp (伪装视频通话)</Option>\r\n        <Option key='utp' value='utp'>utp (伪装BitTorrent下载) </Option>\r\n        <Option key='dtls' value='dtls'>dlts (伪装DLTS 1.2封包)</Option>\r\n        <Option key='wireguard' value='wireguard'>wireguard (伪装Wireguard封包)</Option>\r\n      </Select>\r\n    </Col>\r\n    </Row>),\r\n    ss: (<Row gutter={[16,24]} type=\"flex\" style={{marginBottom: -18}}>\r\n      <Col xs={24} sm={12} md={12}> {commonContent.select} </Col>\r\n      <Col xs={24} sm={12} md={12}> {commonContent.remark} </Col>\r\n      <Col xs={24} sm={24} md={12}> {commonContent.serverAddress} </Col>\r\n      <Col xs={24} sm={24} md={12}></Col>\r\n      <Col xs={24} sm={24} md={12}>\r\n        <Select showSearch style={{width: \"100%\"}} placeholder=\"加密方式 (Method)\" onChange={editOnChange.ssMethod} value={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? serverList[serverPointer].json.id:''}\r\n        filterOption={ (input,option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0  }>\r\n          { ssMethod.map( x => (<Option key={x}>{x}</Option>) )}\r\n        </Select>\r\n      </Col>\r\n      <Col xs={24} sm={24} md={12}>\r\n        <Input.Password placeholder=\"密码 (Password)\" onChange={editOnChange.aid} value={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? serverList[serverPointer].json.aid:''} />\r\n      </Col>\r\n      </Row>\r\n    ),\r\n    trojan: (<Row gutter={[16,24]} type=\"flex\" style={{marginBottom: -18}}>\r\n      <Col xs={24} sm={12} md={12}> {commonContent.select} </Col>\r\n      <Col xs={24} sm={12} md={12}> {commonContent.remark} </Col>\r\n      <Col xs={24} sm={24} md={12}> {commonContent.serverAddress} </Col>\r\n      <Col xs={24} sm={24} md={12}>\r\n        <Input.Password placeholder=\"密码 (Password)\" onChange={editOnChange.aid} value={serverList[serverPointer] && serverList[serverPointer].hasOwnProperty('json')? serverList[serverPointer].json.aid:''} />\r\n      </Col>\r\n      <Col xs={24} sm={24} md={12}>\r\n        <InputGroup compact>\r\n        <Input style={{width: \"100%\", textAlign:\"left\"}} placeholder=\"域名 (Server Name)\" onChange={editOnChange.ws.host} value={serverList[serverPointer]? (serverList[serverPointer].hasOwnProperty('json')? serverList[serverPointer].json.host:''):''} />\r\n        </InputGroup>\r\n      </Col>\r\n      </Row>\r\n    )\r\n\r\n  }\r\n\r\n  const operateTabContent = {\r\n    fastEdit: (\r\n    <Row gutter={[16,24]} justify={\"space-around\"} type=\"flex\" style={{marginBottom: -18}}>\r\n      <Col xs={24} sm={12} md={16}> {commonContent.select} </Col>\r\n      <Col xs={24} sm={12} md={16}> {commonContent.remark} </Col>\r\n      <Col xs={24} sm={24} md={16}> {commonContent.serverAddress} </Col>\r\n    </Row>),\r\n    detailedEdit: ( serverList[serverPointer]? (supportedType.includes(serverList[serverPointer].type)? detailedContent[serverList[serverPointer].type]:commonContent.skeleton):(commonContent.skeleton)),\r\n    _buttons : (<span>\r\n      <Badge count={hasEdited} offset={[-7,0]} dot>\r\n        <Button style={{marginRight: 8}} type=\"primary\" icon={<QrcodeOutlined />} disabled={isLoading || !base64Input.length} onClick={qrcodeModal.btnOnClick}></Button>\r\n      </Badge>\r\n      <Badge count={hasEdited} offset={[-3,0]} dot>\r\n        <Button type=\"primary\" icon={<CheckOutlined />} disabled={isLoading || !base64Input.length} onClick={performSave}>保存</Button>\r\n      </Badge>\r\n      </span>)\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Layout>\r\n        <Row justify=\"start\" align={\"middle\"} style={{textAlign: \"left\"}}>\r\n          <h2>Shawdowrockets 订阅链接编辑器</h2>\r\n          <Col xs={0} sm={0} md={8} style={{marginLeft: 8}}><h3>支持 {supportedType.map( (x,index) => index < supportedType.length-1? x+', ':x)} 链接编辑</h3></Col>\r\n        </Row>\r\n        <Content>\r\n        <Row gutter={[16,16]} justify={\"space-between\"} type=\"flex\">\r\n          <Col xs={24} sm={24} md={12}>\r\n          <Card className=\"card\" tabList={operateTabList} tabBarExtraContent={operateTabContent._buttons} activeTabKey={operateActive} onTabChange={key => setOperateActive(key)}>{operateTabContent[operateActive]}</Card>\r\n          </Col>\r\n          <Col xs={24} sm={24} md={12}>\r\n            <Card className=\"card\" tabList={inputTabList} tabBarExtraContent={inputTabContent._buttons} activeTabKey={inputActive} onTabChange={key => setInputActive(key)}>{inputTabContent[inputActive]}</Card>\r\n          </Col>\r\n        </Row>\r\n        </Content>\r\n        <Modal title=\"生成二维码 (Generate QRCode)\" visible={qrcodeVisible} onOk={qrcodeModal.close} onCancel={qrcodeModal.close}>\r\n          <Row justify=\"center\">\r\n          {textTool.text2qrcode(textInput)}\r\n          </Row>\r\n        </Modal>\r\n        <Modal title=\"订阅链接 (Generate Subscription link)\" visible={subLinkVisible} onOk={() => setSubLinkVisible(false)} onCancel={() => setSubLinkVisible(false)}>\r\n          <Row gutter={[16,16]} justify=\"center\">\r\n            <Col span={20}><Input value={customLink}/></Col>\r\n          </Row>\r\n          <Row justify=\"center\">\r\n            {textTool.text2qrcode( \"sub://\" + Base64.encode(customLink) )}\r\n          </Row>\r\n        </Modal>\r\n        <Modal title=\"请输入资料 (用于更新订阅链接)\" visible={customFormVisible} onOk={customLinkForm.submit} onCancel={() => setCustomFormVisble(false)} confirmLoading={customFormLoading}>\r\n          <Row gutter={[16,16]} justify=\"center\">\r\n            <Col xs={20} sm={20} md={12}><Input placeholder=\"使用者名称 (唯一识别符)\" value={customLinkUser} onChange={customLinkForm.userOnChange}/></Col>\r\n            <Col xs={20} sm={20} md={12}><Input.Password placeholder=\"密码 (Password)\" value={customLinkPwd} onChange={customLinkForm.pwdOnChange}/></Col>\r\n          </Row>\r\n        </Modal>\r\n        <Footer>\r\n        <Row justify={\"center\"}>\r\n        <Col span={24}>\r\n          Created by {<a href=\"https://www.phlinhng.com\">phlinhng</a>}. All rights reserved.\r\n        </Col>\r\n        <Col xs={0} sm={0} md={qrcodeVisible || subLinkVisible || customFormVisible? 0:24}>\r\n        <a className=\"github-fork-ribbon right-bottom fixed\" href=\"https://github.com/phlinhng/b64-url-editor\" data-ribbon=\"Fork me on GitHub\" title=\"Fork me on GitHub\">Fork me on GitHub</a>\r\n        </Col>\r\n        </Row>\r\n        </Footer>\r\n      </Layout>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}